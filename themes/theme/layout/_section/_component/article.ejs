<%#
  @params
  context: should be passed in - determine limited elements for excerpt & list
  article: the hexo post
-%>
<%
  var context = context || "";
-%>
<article id="<%= context %>-<%= article.slug %>"
  class="<%= article.layout %> <%= context %>"
  itemscope itemtype="http://schema.org/Article"
  data-url="<%- url_for(article.path) %>">
  <%- partial('_block/figure', {article: article}) -%>
  <header>
    <% if ( context != 'excerpt' && context != 'listing' ) { -%>
      <%- partial('_block/title', {link: false}) %>
    <% } else { -%>
      <%- partial('_block/title', {link: true}) %>
    <% } -%>
    <% if ( article.layout != 'page' && article.layout != 'about' ) { -%>
    <%- partial('_block/date', {date_format: null}) %>
    <% } %>
  </header>
  <main itemprop="articleBody">
    <% if ( context != 'listing' ) { -%>
      <div>
      <%- article.excerpt %>
      </div>
    <% } -%>
    <% if ( context != 'excerpt' && context != 'listing' ) { -%>
      <%- article.more %>
    <% } -%>
    <% if ( context == 'excerpt' ) { -%>
      <% if (theme.excerpt_link){ -%>
        <a class="more" href="<%- url_for(article.path) %>"><%= theme.excerpt_link %></a>
      <% } -%>
    <% } -%>
  </main>
  <% if ( context != 'excerpt' && context != 'listing' ) { -%>
    <%- partial('_block/gallery') %>
  <% } -%>
  <% if ( context != 'excerpt' && context != 'listing' ) { -%>
  <footer>
    <%- partial('_block/tag') %>
    <%- partial('_block/category') %>
    <% if ( theme.shares ){ -%>
    <%- partial('_block/share') %>
    <% } -%>
  </footer>
  <%- partial('_block/nav') %>
  <% } -%>
  <% if ( article.comments && config.disqus_shortname ) { -%>
  <section id="comments">
    <div id="disqus_thread">
      <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    </div>
  </section>
  <% } -%>
</article>
